var LaunchControllerJS=function(t){"use strict";var s=function(){};s.OFF=12,s.RED_LOW=13,s.RED_FULL=15,s.AMBER_LOW=29,s.AMBER_FULL=63,s.YELLOW_FULL=62,s.GREEN_LOW=28,s.GREEN_FULL=60,s.__class="LedConstants";class e{constructor(t,s){this.name=t,this.code=s,this.note=0,this.status=!1}}class a{constructor(t,s){this.padCount=t,this.padMode=parseInt(s),this.padStatus=new Array(t);for(let s=0;s<t;s++)this[s]=new e("PAD_"+s)}get length(){return this.padCount}getPad(t){return this[t]}get firstSelected(){for(let t=0;t<this.padCount;t++)if(!0===this[t].status)return this[t].code}}var n=Object.freeze({TOGGLE:1,RADIO:2});class o{constructor(t,s,e){this.min_value=s,this.max_value=e,this.value=0}range(t,s){return this}get knobValueNormal(){let t=0;return((t=this.hasDefault?this.defaultValue:this.value)-this.min_value)/(this.max_value-this.min_value)}set knobValue(t){this.value=t}get knobValue(){return this.value}}class u{constructor(t){for(let s=0;s<t;s++)this[s]=new o(s,0,127)}}return t.LaunchController=class{constructor(){this.LaunchControlOut=null,this.knobSet=new u(16),this.padSet=new a(8,n.RADIO)}sendLedOnOff(t,e){let a=t?s.RED_FULL:s.OFF,n=Uint8Array.from([240,0,32,41,2,10,120,8,e,a,247]);this.LaunchControlOut.send(n)}getMIDIMessage(t){let s=t.data,e=0;if(184==s[0]){let t=s[1],e=t<40?t-21:t-33;console.log("Knob "+e+" changed: "+s),this.knobSet[e].knobValue=s[2]}else if(152==s[0]&&127==s[2]){switch(s[1]){case 9:case 10:case 11:case 12:e=s[1]-9;break;case 25:case 26:case 27:case 28:e=s[1]-21}if(console.log("You pressed pad "+e),this.padSet[e].status=!this.padSet[e].status,this.padSet.padMode==n.RADIO)for(let t=0;t<this.padSet.length;t++)e==t?this.sendLedOnOff(this.padSet[e].status,e):(this.sendLedOnOff(!1,t),this.padSet[t].status=!1);else this.padSet.padMode==n.TOGGLE&&this.sendLedOnOff(this.padSet[e].status,e)}}onMIDIFailure(){console.log("Could not access your MIDI devices.")}onMIDISuccess(t){t.inputs;var s=t.outputs;for(var e of t.inputs.values())e.onmidimessage=t=>this.getMIDIMessage(t);for(let t of s.values())"Launch Control"==t.name&&(this.LaunchControlOut=t,console.debug("Assigned MIDI output, "+t.name));null==this.LaunchControlOut&&console.error("No MIDI output found!");var a=Uint8Array.from([184,0,0]);this.LaunchControlOut.send(a);var n=Uint8Array.from([240,0,32,41,2,10,119,8,247]);this.LaunchControlOut.send(n),console.log("MIDI controller reset!")}init(){navigator.requestMIDIAccess({sysex:!0}).then(t=>this.onMIDISuccess(t),this.onMIDIFailure)}},t}({});
